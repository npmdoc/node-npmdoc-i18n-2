<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://github.com/jeresig/i18n-node-2">i18n-2 (v0.6.3)</a>
</h1>
<h4>lightweight simple translation module with dynamic json storage</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.i18n-2">module i18n-2</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n-2">
            function <span class="apidocSignatureSpan"></span>i18n-2
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.expressBind">
            function <span class="apidocSignatureSpan">i18n-2.</span>expressBind
            <span class="apidocSignatureSpan">(app, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n">
            function <span class="apidocSignatureSpan">i18n-2.</span>i18n
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.registerMethods">
            function <span class="apidocSignatureSpan">i18n-2.</span>registerMethods
            <span class="apidocSignatureSpan">(helpers, req)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">i18n-2.</span>i18n.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">i18n-2.</span>localeCache</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">i18n-2.</span>resMethods</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.i18n-2.i18n">module i18n-2.i18n</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.i18n">
            function <span class="apidocSignatureSpan">i18n-2.</span>i18n
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.expressBind">
            function <span class="apidocSignatureSpan">i18n-2.i18n.</span>expressBind
            <span class="apidocSignatureSpan">(app, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.registerMethods">
            function <span class="apidocSignatureSpan">i18n-2.i18n.</span>registerMethods
            <span class="apidocSignatureSpan">(helpers, req)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">i18n-2.i18n.</span>localeCache</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">i18n-2.i18n.</span>resMethods</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.i18n-2.i18n.prototype">module i18n-2.i18n.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.__">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>__
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.__n">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>__n
            <span class="apidocSignatureSpan">(pathOrSingular, countOrPlural, additionalOrCount)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.dump">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>dump
            <span class="apidocSignatureSpan">(data, indent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.getLocale">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>getLocale
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.initLocale">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>initLocale
            <span class="apidocSignatureSpan">(locale, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.isPreferredLocale">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>isPreferredLocale
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.locateFile">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>locateFile
            <span class="apidocSignatureSpan">(locale)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.parse">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>parse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.preferredLocale">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>preferredLocale
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.readFile">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>readFile
            <span class="apidocSignatureSpan">(locale)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocale">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocale
            <span class="apidocSignatureSpan">(locale)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromCookie">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromCookie
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromEnvironmentVariable">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromEnvironmentVariable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromQuery">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromQuery
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromSessionVar">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromSessionVar
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromSubdomain">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromSubdomain
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.translate">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>translate
            <span class="apidocSignatureSpan">(locale, singular, plural)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.i18n-2.i18n.prototype.writeFile">
            function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>writeFile
            <span class="apidocSignatureSpan">(locale)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>cookieName</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>defaultLocale</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>directory</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>extension</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>indent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>sessionVarName</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.i18n-2" id="apidoc.module.i18n-2">module i18n-2</a></h1>


    <h2>
        <a href="#apidoc.element.i18n-2.i18n-2" id="apidoc.element.i18n-2.i18n-2">
        function <span class="apidocSignatureSpan"></span>i18n-2
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">i18n-2 = function (opt) {
	var self = this;

	// Put into dev or production mode
	this.devMode = process.env.NODE_ENV !== "production";

	// Copy over options
	for (var prop in opt) {
		this[prop] = opt[prop];
	}

	// you may register helpers in global scope, up to you
	if (typeof this.register === "object") {
		i18n.resMethods.forEach(function (method) {
			self.register[method] = self[method].bind(self);
		});
	}

	// implicitly read all locales
	// if it's an array of locale names, read in the data
	if (opt.locales &amp;&amp; opt.locales.forEach) {
		this.locales = {};

		opt.locales.forEach(function (locale) {
			self.readFile(locale);
		});

		this.defaultLocale = opt.locales[0];
	}

	// Set the locale to the default locale
	this.setLocale(this.defaultLocale);

	// Check the defaultLocale
	if (!this.locales[this.defaultLocale]) {
		console.error("Not a valid default locale.");
	}

	if (this.request) {
		if (this.subdomain) {
			this.setLocaleFromSubdomain(this.request);
		}

		if (this.query !== false) {
			this.setLocaleFromQuery(this.request);
		}

		if (this.session !== false) {
			this.setLocaleFromSessionVar(this.request);
		}

		this.prefLocale = this.preferredLocale();

		if (this.prefLocale !== false &amp;&amp; this.prefLocale !== this.locale) {
			this.setLocale(this.prefLocale);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.expressBind" id="apidoc.element.i18n-2.expressBind">
        function <span class="apidocSignatureSpan">i18n-2.</span>expressBind
        <span class="apidocSignatureSpan">(app, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">expressBind = function (app, opt) {
	if (!app) {
		return;
	}

	app.use(function (req, res, next) {
		opt.request = req;
		req.i18n = new i18n(opt);

		// Express 3
		if (res.locals) {
			i18n.registerMethods(res.locals, req)
		}

		next();
	});

	// Express 2
	if (app.dynamicHelpers) {
		app.dynamicHelpers(i18n.registerMethods({}));
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## API:

### `new i18n(options)`

The `i18n` function is the return result from calling `require('i18n-2')`. You use this to instantiate an `I18n` instance
 and set any configuration options. You'll probably only do this if you're not using the `expressBind` method.

### `i18n.<span class="apidocCodeKeywordSpan">expressBind</span>(app, options)`

You'll use this method to attach the i18n functionality to the request object inside Express.js. The app argument should be
 your Express.js app and the options argument should be the same as if you were calling `new i18n(options)`. See **"Using with
 Express.js"** at the end of this README for more details.

### `__(string, [...])`

Translates a string according to the current locale. Also supports sprintf syntax, allowing you to replace text, using the node-
sprintf module.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n" id="apidoc.element.i18n-2.i18n">
        function <span class="apidocSignatureSpan">i18n-2.</span>i18n
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">i18n = function (opt) {
	var self = this;

	// Put into dev or production mode
	this.devMode = process.env.NODE_ENV !== "production";

	// Copy over options
	for (var prop in opt) {
		this[prop] = opt[prop];
	}

	// you may register helpers in global scope, up to you
	if (typeof this.register === "object") {
		i18n.resMethods.forEach(function (method) {
			self.register[method] = self[method].bind(self);
		});
	}

	// implicitly read all locales
	// if it's an array of locale names, read in the data
	if (opt.locales &amp;&amp; opt.locales.forEach) {
		this.locales = {};

		opt.locales.forEach(function (locale) {
			self.readFile(locale);
		});

		this.defaultLocale = opt.locales[0];
	}

	// Set the locale to the default locale
	this.setLocale(this.defaultLocale);

	// Check the defaultLocale
	if (!this.locales[this.defaultLocale]) {
		console.error("Not a valid default locale.");
	}

	if (this.request) {
		if (this.subdomain) {
			this.setLocaleFromSubdomain(this.request);
		}

		if (this.query !== false) {
			this.setLocaleFromQuery(this.request);
		}

		if (this.session !== false) {
			this.setLocaleFromSessionVar(this.request);
		}

		this.prefLocale = this.preferredLocale();

		if (this.prefLocale !== false &amp;&amp; this.prefLocale !== this.locale) {
			this.setLocale(this.prefLocale);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.registerMethods" id="apidoc.element.i18n-2.registerMethods">
        function <span class="apidocSignatureSpan">i18n-2.</span>registerMethods
        <span class="apidocSignatureSpan">(helpers, req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerMethods = function (helpers, req) {
	i18n.resMethods.forEach(function (method) {
		if (req) {
			helpers[method] = req.i18n[method].bind(req.i18n);
		} else {
			helpers[method] = function (req) {
				return req.i18n[method].bind(req.i18n);
			};
		}

	});

	return helpers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.i18n-2.i18n" id="apidoc.module.i18n-2.i18n">module i18n-2.i18n</a></h1>


    <h2>
        <a href="#apidoc.element.i18n-2.i18n.i18n" id="apidoc.element.i18n-2.i18n.i18n">
        function <span class="apidocSignatureSpan">i18n-2.</span>i18n
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">i18n = function (opt) {
	var self = this;

	// Put into dev or production mode
	this.devMode = process.env.NODE_ENV !== "production";

	// Copy over options
	for (var prop in opt) {
		this[prop] = opt[prop];
	}

	// you may register helpers in global scope, up to you
	if (typeof this.register === "object") {
		i18n.resMethods.forEach(function (method) {
			self.register[method] = self[method].bind(self);
		});
	}

	// implicitly read all locales
	// if it's an array of locale names, read in the data
	if (opt.locales &amp;&amp; opt.locales.forEach) {
		this.locales = {};

		opt.locales.forEach(function (locale) {
			self.readFile(locale);
		});

		this.defaultLocale = opt.locales[0];
	}

	// Set the locale to the default locale
	this.setLocale(this.defaultLocale);

	// Check the defaultLocale
	if (!this.locales[this.defaultLocale]) {
		console.error("Not a valid default locale.");
	}

	if (this.request) {
		if (this.subdomain) {
			this.setLocaleFromSubdomain(this.request);
		}

		if (this.query !== false) {
			this.setLocaleFromQuery(this.request);
		}

		if (this.session !== false) {
			this.setLocaleFromSessionVar(this.request);
		}

		this.prefLocale = this.preferredLocale();

		if (this.prefLocale !== false &amp;&amp; this.prefLocale !== this.locale) {
			this.setLocale(this.prefLocale);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.expressBind" id="apidoc.element.i18n-2.i18n.expressBind">
        function <span class="apidocSignatureSpan">i18n-2.i18n.</span>expressBind
        <span class="apidocSignatureSpan">(app, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">expressBind = function (app, opt) {
	if (!app) {
		return;
	}

	app.use(function (req, res, next) {
		opt.request = req;
		req.i18n = new i18n(opt);

		// Express 3
		if (res.locals) {
			i18n.registerMethods(res.locals, req)
		}

		next();
	});

	// Express 2
	if (app.dynamicHelpers) {
		app.dynamicHelpers(i18n.registerMethods({}));
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## API:

### `new i18n(options)`

The `i18n` function is the return result from calling `require('i18n-2')`. You use this to instantiate an `I18n` instance
 and set any configuration options. You'll probably only do this if you're not using the `expressBind` method.

### `i18n.<span class="apidocCodeKeywordSpan">expressBind</span>(app, options)`

You'll use this method to attach the i18n functionality to the request object inside Express.js. The app argument should be
 your Express.js app and the options argument should be the same as if you were calling `new i18n(options)`. See **"Using with
 Express.js"** at the end of this README for more details.

### `__(string, [...])`

Translates a string according to the current locale. Also supports sprintf syntax, allowing you to replace text, using the node-
sprintf module.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.registerMethods" id="apidoc.element.i18n-2.i18n.registerMethods">
        function <span class="apidocSignatureSpan">i18n-2.i18n.</span>registerMethods
        <span class="apidocSignatureSpan">(helpers, req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerMethods = function (helpers, req) {
	i18n.resMethods.forEach(function (method) {
		if (req) {
			helpers[method] = req.i18n[method].bind(req.i18n);
		} else {
			helpers[method] = function (req) {
				return req.i18n[method].bind(req.i18n);
			};
		}

	});

	return helpers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.i18n-2.i18n.prototype" id="apidoc.module.i18n-2.i18n.prototype">module i18n-2.i18n.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.__" id="apidoc.element.i18n-2.i18n.prototype.__">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>__
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__ = function () {
		var msg = this.translate(this.locale, arguments[0]);

		if (arguments.length &gt; 1) {
			msg = vsprintf(msg, Array.prototype.slice.call(arguments, 1));
		}

		return msg;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Load Module and Instantiate
    var i18n = new (require('i18n-2'))({
        // setup some locales - other locales default to the first locale
        locales: ['en', 'de']
    });

    // Use it however you wish
    console.log( i18n.<span class="apidocCodeKeywordSpan">__</span>("Hello!") );

## API:

### `new i18n(options)`

The `i18n` function is the return result from calling `require('i18n-2')`. You use this to instantiate an `I18n` instance
 and set any configuration options. You'll probably only do this if you're not using the `expressBind` method.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.__n" id="apidoc.element.i18n-2.i18n.prototype.__n">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>__n
        <span class="apidocSignatureSpan">(pathOrSingular, countOrPlural, additionalOrCount)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__n = function (pathOrSingular, countOrPlural, additionalOrCount) {
		var msg;
		if (typeof countOrPlural === 'number') {
			var path = pathOrSingular;
			var count = countOrPlural;
			msg = this.translate(this.locale, path);

			msg = vsprintf(parseInt(count, 10) &gt; 1 ? msg.other : msg.one, Array.prototype.slice.call(arguments, 1));
		} else {
			var singular = pathOrSingular;
			var plural = countOrPlural;
			var count = additionalOrCount;
			msg = this.translate(this.locale, singular, plural);

			msg = vsprintf(parseInt(count, 10) &gt; 1 ? msg.other : msg.one, [count]);

			if (arguments.length &gt; 3) {
				msg = vsprintf(msg, Array.prototype.slice.call(arguments, 3));
			}
		}

		return msg;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

i18n.__('foo.bar');

### `__n(one, other, count, [...])`

Different plural forms are supported as a response to `count`:

var singular = i18n.<span class="apidocCodeKeywordSpan">__n</span>('%s cat', '%s cats', 1);
var plural = i18n.__n('%s cat', '%s cats', 3);

this gives you **1 cat** and **3 cats**. As with `__(...)` these could be nested:

var singular = i18n.__n('There is one monkey in the %%s', 'There are %d monkeys in the %%s', 1, 'tree&amp;#
x27;);
var plural = i18n.__n('There is one monkey in the %%s', 'There are %d monkeys in the %%s', 3, 'tree'
;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.dump" id="apidoc.element.i18n-2.i18n.prototype.dump">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>dump
        <span class="apidocSignatureSpan">(data, indent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dump = function (data, indent) {
	  return JSON.stringify(data, null, indent);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.getLocale" id="apidoc.element.i18n-2.i18n.prototype.getLocale">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>getLocale
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLocale = function () {
		return this.locale;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.initLocale" id="apidoc.element.i18n-2.i18n.prototype.initLocale">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>initLocale
        <span class="apidocSignatureSpan">(locale, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initLocale = function (locale, data) {
		if (!this.locales[locale]) {
			this.locales[locale] = data;

			// Only cache the files when we're not in dev mode
			if (!this.devMode) {
				var file = this.locateFile(locale);
				if (!i18n.localeCache[file]) {
					i18n.localeCache[file] = data;
				}
			}
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.isPreferredLocale" id="apidoc.element.i18n-2.i18n.prototype.isPreferredLocale">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>isPreferredLocale
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isPreferredLocale = function () {
		return !this.prefLocale ||
				this.prefLocale === this.getLocale();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.locateFile" id="apidoc.element.i18n-2.i18n.prototype.locateFile">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>locateFile
        <span class="apidocSignatureSpan">(locale)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">locateFile = function (locale) {
		return path.normalize(this.directory + '/' + locale + this.extension);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.parse" id="apidoc.element.i18n-2.i18n.prototype.parse">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>parse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
locales: ['at-de', 'de-de', 'at-en', 'de-en'],
base: function(locale) {
    return locale.slice(-2);
}

### `parse(data, [indent])` and `dump(data)`

Optional custom methods to override `JSON.<span class="apidocCodeKeywordSpan">parse</span>()` and `JSON.stringify()`, respectively
. One possible use for this is to allow for file formats other than JSON. For example:

var i18n = new (require('i18n-2'))({
    locales: ['en', 'de'],
    extension: '.yaml',
    parse: function (data) {
        return require('js-yaml').safeLoad(data);
    },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.preferredLocale" id="apidoc.element.i18n-2.i18n.prototype.preferredLocale">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>preferredLocale
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preferredLocale = function (req) {
		req = req || this.request;

		if (!req || !req.headers) {
			return;
		}

		var accept = req.headers["accept-language"] || "",
				regExp = /(^|,\s*)([a-z0-9-]+)/gi,
				self = this,
				prefLocale;

		while (!prefLocale &amp;&amp; (match = regExp.exec(accept))) {
			var locale = match[2].toLowerCase();
			var parts = locale.split("-");

			if (self.locales[locale]) {
				prefLocale = locale;
			} else if (parts.length &gt; 1 &amp;&amp; self.locales[parts[0]]) {
				prefLocale = parts[0];
			}
		}

		return prefLocale || this.defaultLocale;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.readFile" id="apidoc.element.i18n-2.i18n.prototype.readFile">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>readFile
        <span class="apidocSignatureSpan">(locale)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readFile = function (locale) {
		var file = this.locateFile(locale);

		if (!this.devMode &amp;&amp; i18n.localeCache[file]) {
			this.initLocale(locale, i18n.localeCache[file]);
			return;
		}

		try {
			var localeFile = fs.readFileSync(file);
			var base;

			// reading base file if 'base' provided
			if (typeof this.base === "function") {
				var baseFilename;

				try {
					baseFilename = this.base(locale);
				} catch (e) {
					console.error('base function threw exception for locale %s', locale, e);
				}

				if (typeof baseFilename === "string") {
					try {
						base = this.parse(fs.readFileSync(this.locateFile(baseFilename)));
					} catch (e) {
						console.error('unable to read or parse base file %s for locale %s', baseFilename, locale, e);
					}
				}
			}

			try {
				// parsing file content
				var content = this.parse(localeFile);

				if (base) {
					// writing content to the base and swapping
					for (var prop in content) {
						base[prop] = content[prop];
					}
					content = base;
				}

				// putting content to locales[locale]
				this.initLocale(locale, content);
			} catch (e) {
				console.error('unable to parse locales from file (maybe ' + file +
						' is empty or invalid ' + this.extension + '?): ', e);
			}

		} catch (e) {
			// unable to read, so intialize that file
			// locales[locale] are already set in memory, so no extra read required
			// or locales[locale] are empty, which initializes an empty locale.json file
			if (!fs.existsSync(file)) {
				this.writeFile(locale);
			}
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocale" id="apidoc.element.i18n-2.i18n.prototype.setLocale">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocale
        <span class="apidocSignatureSpan">(locale)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocale = function (locale) {

		if (!locale) return;

		if (!this.locales[locale]) {
			if (this.devMode) {
				console.warn("Locale (" + locale + ") not found.");
			}

			locale = this.defaultLocale;
		}

		return (this.locale = locale);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### `getLocale()`

Returns a string containing the current locale. If no locale has been specified then it default to the value specified in `defaultLocale
`.

### `setLocale(locale)`

Sets a locale to the specified string. If the locale is unknown, the locale defaults to the one specified by `defaultLocale`. For
 example if you have locales of 'en' and 'de', and a `defaultLocale` of 'en', then call `.<span class="apidocCodeKeywordSpan">setLocale</span>('ja')` it will be equivalent to calling `.setLocale('en')`.

### `setLocaleFromQuery([request])`

To be used with Express.js or another framework that provides a `request` object. Generally you would want to use this by setting
 the `query` option to `true`.

This method takes in an Express.js request object, looks at the query property, and specifically at the `lang` parameter. Reading
 the value of that parameter will then set the locale.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromCookie" id="apidoc.element.i18n-2.i18n.prototype.setLocaleFromCookie">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromCookie
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocaleFromCookie = function (req) {
		req = req || this.request;

		if (!req || !req.cookies || !this.cookieName || !req.cookies[this.cookieName]) {
			return;
		}

		var locale = req.cookies[this.cookieName].toLowerCase();

		if (this.locales[locale]) {
			if (this.devMode) {
				console.log("Overriding locale from cookie: " + locale);
			}

			this.setLocale(locale);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // change the cookie name from 'lang' to 'locale'
    cookieName: 'locale'
});

// This is how you'd set a locale from req.cookies.
// Don't forget to set the cookie either on the client or in your Express app.
app.use(function(req, res, next) {
    req.i18n.<span class="apidocCodeKeywordSpan">setLocaleFromCookie</span>();
    next();
});

// Set up the rest of the Express middleware
app.use(app.router);
app.use(express.static(__dirname + '/public'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromEnvironmentVariable" id="apidoc.element.i18n-2.i18n.prototype.setLocaleFromEnvironmentVariable">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromEnvironmentVariable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocaleFromEnvironmentVariable = function () {
		if (!process.env.LANG) {
			return;
		}
		var locale = process.env.LANG.split("_")[0];
		if (this.locales[locale]) {
			if (this.devMode) {
				console.log("Overriding locale from environment variable: " + locale);
			}

			this.setLocale(locale);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromQuery" id="apidoc.element.i18n-2.i18n.prototype.setLocaleFromQuery">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromQuery
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocaleFromQuery = function (req) {
		req = req || this.request;

		if (!req || !req.query || !req.query.lang) {
			return;
		}

		var locale = (req.query.lang+'').toLowerCase();

		if (this.locales[locale]) {
			if (this.devMode) {
				console.log("Overriding locale from query: " + locale);
			}

			this.setLocale(locale);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromSessionVar" id="apidoc.element.i18n-2.i18n.prototype.setLocaleFromSessionVar">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromSessionVar
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocaleFromSessionVar = function (req) {
		req = req || this.request;

		if (!req || !req.session || !req.session[this.sessionVarName]) {		
			return;
		}

		var locale = req.session[this.sessionVarName];

		if (this.locales[locale]) {
			if (this.devMode) {
				console.log("Overriding locale from query: " + locale);
			}
			this.setLocale(locale);
		}

	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.setLocaleFromSubdomain" id="apidoc.element.i18n-2.i18n.prototype.setLocaleFromSubdomain">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>setLocaleFromSubdomain
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLocaleFromSubdomain = function (req) {
		req = req || this.request;

		if (!req || !req.headers || !req.headers.host) {
			return;
		}

		if (/^([^.]+)/.test(req.headers.host) &amp;&amp; this.locales[RegExp.$1]) {
			if (this.devMode) {
				console.log("Overriding locale from host: " + RegExp.$1);
			}

			this.setLocale(RegExp.$1);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.translate" id="apidoc.element.i18n-2.i18n.prototype.translate">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>translate
        <span class="apidocSignatureSpan">(locale, singular, plural)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">translate = function (locale, singular, plural) {
		if (!locale || !this.locales[locale]) {
			if (this.devMode) {
				console.warn("WARN: No locale found. Using the default (" +
						this.defaultLocale + ") as current locale");
			}

			locale = this.defaultLocale;

			this.initLocale(locale, {});
		}

		if (!this.locales[locale][singular]) {
			if (this.devMode) {
				dotNotation(this.locales[locale], singular, plural ? { one: singular, other: plural } : undefined);
				this.writeFile(locale);
			}
		}

		return dotNotation(this.locales[locale], singular, plural ? { one: singular, other: plural } : undefined);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.i18n-2.i18n.prototype.writeFile" id="apidoc.element.i18n-2.i18n.prototype.writeFile">
        function <span class="apidocSignatureSpan">i18n-2.i18n.prototype.</span>writeFile
        <span class="apidocSignatureSpan">(locale)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeFile = function (locale) {
		// don't write new locale information to disk if we're not in dev mode
		if (!this.devMode) {
			// Initialize the locale if didn't exist already
			this.initLocale(locale, {});
			return;
		}

		// creating directory if necessary
		try {
			fs.lstatSync(this.directory);

		} catch (e) {
			if (this.devMode) {
				console.log('creating locales dir in: ' + this.directory);
			}

			fs.mkdirSync(this.directory, 0755);
		}

		// Initialize the locale if didn't exist already
		this.initLocale(locale, {});

		// writing to tmp and rename on success
		try {
			var target = this.locateFile(locale),
					tmp = target + ".tmp";

			fs.writeFileSync(tmp,
							 this.dump(this.locales[locale], this.indent),
							 "utf8");

			if (fs.statSync(tmp).isFile()) {
				fs.renameSync(tmp, target);

			} else {
				console.error('unable to write locales to file (either ' + tmp +
						' or ' + target + ' are not writeable?): ');
			}

		} catch (e) {
			console.error('unexpected error writing files (either ' + tmp +
					' or ' + target + ' are not writeable?): ', e);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>














</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>